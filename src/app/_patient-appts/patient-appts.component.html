

<div class="back">
    <div class="top">
    <div class="row" id="head">
        <img src={{imagePath}} style="height:12%; width:7%; margin-top:.8rem; margin-left:2rem; padding-bottom:.2rem;"/>
        <h1>SMU Well-Care</h1>
    </div>
    <div class="row" id="mynav">
        <nav class="navbar navbar-expand-lg">
              <ul class="navbar-nav">
                <li class="nav-item inactive">
                  <a class="btn" (click)="navigateToProfile()">My Profile </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" [routerLink]="['_patient-appts']">Appointments <span class="sr-only">(current)</span></a>
                </li>

                <li class="nav-item">
                    <a class="nav-link inactive"[routerLink]="['/_patient-profile/_patient-settings']">Settings</a>
                </li>
                <li class="nav-item">
                    <button class="btn inactive" (click)="logout()" id="logout">Logout</button>
                </li>
              </ul>
        </nav>
    </div>
  </div>
  <div class="jumbotron bg-white">
    <h2>
      Appointment Scheduler
    </h2>

    <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-12">
              <h5 class="card-title">
                My Appointments
              </h5>
            </div>
          </div>
          <br>
          <div class="row">
            <table class="table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Doctor</th>
                    <th>Type</th>
                    <th>Symtoms</th>
                    <th>Status</th>
                    <th></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>04/14/18</td>
                    <td>10am</td>
                    <td>Dr. Banner</td>
                    <td>General Check Up</td>
                    <td>Anger management, green skin pigmentation, gamma radiation exposure</td>
                    <td>Attended</td>
                    <td>
                      <div class="btn btn-secondary">
                        Edit
                      </div>
                    </td>
                    <td>
                      <div class="btn btn-danger">
                        Cancel
                      </div>
                    </td>
                  </tr>
                  <tr *ngFor="let appt of user.appointments">
                    <td>{{appt.date}}</td>
                    <td>{{appt.time}}</td>
                    <td>Dr. {{appt.doctor.lastName}}</td>
                    <td>{{appt.type}}</td>
                    <td>{{appt.reason}}</td>
                    <td>{{appt.status}}</td>
                    <td>
                      <div class="btn btn-secondary">
                        Edit
                      </div>
                    </td>
                    <td>
                      <div class="btn btn-danger">
                        Cancel
                      </div>
                    </td>
                  </tr>
                </tbody>
            </table>
          </div>
        </div>
    </div>
    <div class="row" id="buttonContainer" style="padding-top:2rem;">
        <div class="col-md-12">
            <button type="button" class="btn btn-secondary" (click)="openModal(addAppt)">Schedule a New Appointment</button>
        </div>
    </div>

    <ng-template #addAppt class="modal fade addAppt"  role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header modalHeaderColor text-black">
              <h5 class="modal-title" id="modalLabel">Schedule a new appointment</h5>
              <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                  <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="form-group">
                    <input type="text" [(ngModel)]="docSearchText" placeholder="Search for a doctor"
                      [ngModelOptions]="{standalone: true}" style="width:90%; padding:1rem; border-radius: 7px; border-color: rgb(228, 227, 227);">
                    <div class="container" *ngIf="docSearchText">
                      <div class="checkbox" *ngFor="let doc of fakeDocs | filterByName : docSearchText"
                        style="padding:.5rem;">
                          <label><input type="checkbox" [(ngModel)]="newAppt.doctor" ng-value="doc" (ngModelChange)="setDoc(doc)"
                            style="padding:0.3rem;" [ngModelOptions]="{standalone: true}">  Dr. {{doc.firstName}} {{doc.lastName}}</label>
                      </div>
                    </div>
                </div>
                <div class="form-group">
                  <label for="reason">Reason for Visit</label>
                  <textarea class="form-control" name="reason" [(ngModel)]="newAppt.reason" rows="1" required="true" required></textarea>
                </div>
                <div class="form-group">
                    <mat-input-container>
                        <input matInput [matDatepicker]="picker" [(ngModel)]="newAppt.date" [ngModelOptions]="{standalone: true}">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    </mat-input-container>
                    <mat-datepicker #picker></mat-datepicker>
                </div>
                <div class="form-group" *ngIf="newAppt.doctor && newAppt.date">
                    <div dtyle="overflow:hidden; width:4rem;" *ngIf="checkAvailability()">
                            <label class="row" for="sel1" style="padding:1rem; font-size:1.5rem;">
                              Appointment time:</label>
                            <select class="row" name="sel1" [(ngModel)]="newAppt.time"
                              style="border-color:white; margin-left:0.3rem; width:auto; padding:0.5rem;">
                              <option *ngFor="let time of available">{{time}}</option>
                            </select>
                    </div>
                </div>
                <div class="form-group">
                  <button (click)="addNewAppt()" class="btn btn-primary">Schedule Appointment</button>
                  <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
              </div>
              </form>
            </div>
          </div>
        </div>
    </ng-template>

    <!-- <app-patient-add-appointment></app-patient-add-appointment> -->
  </div>
</div>
